<!DOCTYPE html>
<html>
<head>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    
    <script>
        // Je 'place-on-marker' component blijft exact hetzelfde!
        AFRAME.registerComponent('place-on-marker', {
            init: function() {
                const marker = this.el;
                const modelToPlace = document.querySelector('#mijn-schakelaar-permanent');
                let hasPlaced = false;

                marker.addEventListener('markerFound', () => {
                    if (hasPlaced) return;

                    const position = marker.getAttribute('position');
                    const rotation = marker.getAttribute('rotation');

                    modelToPlace.setAttribute('position', position);
                    modelToPlace.setAttribute('rotation', rotation);
                    
                    modelToPlace.setAttribute('visible', 'true');
                    hasPlaced = true;
                });

                modelToPlace.addEventListener('click', () => {
                    modelToPlace.setAttribute('visible', 'false');
                    hasPlaced = false;
                });
            }
        });
    </script>
</head>

<body style="margin: 0px; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">

        <a-entity
            id="mijn-schakelaar-permanent"
            gltf-model="./model.glb"
            scale="50 50 50"
            visible="false"
        ></a-entity>

        <a-nft
            type="nft"
            url="./catalogus" 
            smooth="true"
            smoothCount="5"
            place-on-marker
        >
            </a-nft>

        <a-camera>
            <a-cursor></a-cursor>
        </a-camera>

    </a-scene>
</body>
</html>